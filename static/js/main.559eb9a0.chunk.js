(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(t,e,a){t.exports=a.p+"static/media/DefaultCityBG.15adb96a.jpg"},156:function(t,e,a){t.exports=a(403)},161:function(t,e,a){},399:function(t,e,a){},402:function(t,e){},403:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),c=a(36),r=a.n(c),i=(a(161),a(145)),l=a(146),s=a(154),m=a(147),u=a(155),g=a(31),h=a.n(g),d=a(148),p=a.n(d),y=a(57),f=a(151),v=a.n(f),b=window.google=window.google?window.google:{},E=Object(y.withScriptjs)(Object(y.withGoogleMap)(function(t){var e=t.getInfo,a=t.lat,n=t.lng,c=t.cityName,r=t.country;return o.a.createElement(y.GoogleMap,{onClick:e,defaultZoom:12,center:{lat:a,lng:n}},o.a.createElement(v.a,{position:{lat:a,lng:n},labelAnchor:new b.maps.Point(0,0),labelStyle:{fontSize:"1.3rem",fontWeight:"700",backgroundColor:"white",color:"black",padding:"0.3rem 0.5rem 0.2rem",borderRadius:"30px"}},o.a.createElement("div",null,c||"Somewhere on",",",r||"Planet Earth")))})),w=function(t){var e=t.cityName,a=t.temp_c,n=t.text,c=t.getInfo,r=t.lat,i=t.lng,l=t.country;return o.a.createElement(o.a.Fragment,null,console.log({lat:r},{lng:i}),o.a.createElement("h1",null,e),o.a.createElement("h1",null,a),o.a.createElement("h1",null,n),o.a.createElement("div",{style:{height:"450px",width:"50%"}},o.a.createElement(E,{getInfo:c,lat:r,lng:i,cityName:e,country:l,googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAEV5hm-_7AqHTdPCrmjbFLY1bQkvEGpK0",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"22.5rem"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})})))},I=(a(399),function(t){var e=t.getInput;return o.a.createElement("form",{onSubmit:e},o.a.createElement("input",{type:"text",name:"city"}),o.a.createElement("input",{type:"submit"}))}),k=a(152),x=a(153),N=a.n(x),M="32097cc475f84a0dac883738192204",j="7986301-c14a62fbcda5a08a22ab81f9a",D=function(t){function e(){var t,a;Object(i.a)(this,e);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(o)))).state={isLoading:!0,cityName:"Kiev",numForecastDay:5,bgIMG:"",lat:50.25,lng:30.3,country:"Ukraine"},a.getInfoMapClick=function(t){var e=t.latLng.lat(),n=t.latLng.lng();console.log(e,n);var o=a.state.numForecastDay,c="http://api.apixu.com/v1/forecast.json?key=".concat(M,"&q=").concat(e,",\n    ").concat(n,"&days=").concat(o);console.log(c),h.a.get(c).then(function(t){return t.data}).then(function(t){a.setState({isLoading:!1,cityName:t.location.name,lat:t.location.lat,lng:t.location.lon,country:t.location.country,temp_c:t.current.temp_c,text:t.current.condition.text,iconUrl:t.current.condition.icon,forecastDays:t.forecast.forecastday},function(){return a.searchImages()})}).catch(function(t){t&&console.error("Cannot fetch Weather Data from API",t)})},a.cityNameUpdate=function(t){t.preventDefault(),a.setState({cityName:t.target.city.value},function(){return a.updateWeatherAndImage(a.state.cityName)}),t.target.city.value=""},a}return Object(u.a)(e,t),Object(l.a)(e,[{key:"searchImages",value:function(){var t=this,e=this.state.cityName,a="http://cors.io/?https://pixabay.com/api/?key=".concat(j,"&q=").concat(e);console.log(a),h.a.get(a).then(function(t){return t.data}).then(function(e){0===e.hits.length?t.setState({bgIMG:N.a}):t.setState({bgIMG:e.hits[Math.floor(Math.random()*e.hits.length)].largeImageURL})})}},{key:"updateWeather",value:function(){var t=this,e=this.state,a=e.cityName,n=e.numForecastDay,o="http://cors.io/?http://api.apixu.com/v1/forecast.json?key=".concat(M,"&q=").concat(a,"&days=").concat(n);h.a.get(o).then(function(t){return t.data}).then(function(e){t.setState({isLoading:!1,lat:e.location.lat,lng:e.location.lon,country:e.location.country,temp_c:e.current.temp_c,text:e.current.condition.text,iconUrl:e.current.condition.icon,forecastDays:e.forecast.forecastday})}).catch(function(t){t&&console.error("Cannot fetch Weather Data from API",t)})}},{key:"componentDidMount",value:function(){this.updateWeather(),this.searchImages()}},{key:"updateWeatherAndImage",value:function(t){var e=this,a=this.state,n=a.cityName,o=a.numForecastDay,c=h.a.get("http://cors.io/?http://api.apixu.com/v1/forecast.json?key=".concat(M,"&q=").concat(n,"&days=").concat(o)),r=h.a.get("http://cors.io/?https://pixabay.com/api/?key=".concat(j,"&q=").concat(n));k.a.all([c,r]).then(function(t){console.log(t),e.setState({isLoading:!1,bgIMG:t[1].data.hits[Math.floor(Math.random()*t[1].data.hits.length)].largeImageURL,cityName:t[0].data.location.name,lat:t[0].data.location.lat,lng:t[0].data.location.lon,country:t[0].data.location.country,temp_c:t[0].data.current.temp_c,text:t[0].data.current.condition.text,iconUrl:t[0].data.current.condition.icon,forecastDays:t[0].data.forecast.forecastday})})}},{key:"render",value:function(){var t=this.state,e=t.cityName,a=t.isLoading,n=t.temp_c,c=t.text,r=t.iconUrl,i=t.forecastDays,l=t.lng,s=t.lat,m=t.country,u=t.bgIMG;return o.a.createElement(o.a.Fragment,null,a?o.a.createElement("div",{className:"wrap"},o.a.createElement("div",{className:"wrapLoader"},o.a.createElement(p.a,{type:"Circles",color:"#bbb",height:"80",width:"80",margin:"100px"}))):o.a.createElement("div",{className:"bgImage",style:{backgroundImage:"linear-gradient(\n      rgba(255, 255, 255, 0.8),\n      rgba(255, 255, 255, 0.1)\n    ),url(".concat(u,")")}},o.a.createElement(I,{getInput:this.cityNameUpdate}),o.a.createElement("ul",null,i.map(function(t){return o.a.createElement("li",null,t.date)})),o.a.createElement(w,{cityName:e,temp_c:n,text:c,iconUrl:r,lat:s,lng:l,country:m,getInfo:this.getInfoMapClick})))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[156,1,2]]]);
//# sourceMappingURL=main.559eb9a0.chunk.js.map